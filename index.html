<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gradify — القرآن (نسخة صفحة واحدة مستقرة)</title>
<style>
:root{--bg:#0b0f17;--card:#0e1624;--ring:#23314e;--ink:#eaf2ff;--muted:#9fb1d4}
*{box-sizing:border-box}html,body{margin:0;padding:0;background:#0b0f17;color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
.container{max-width:980px;margin:12px auto;padding:12px}
.head{position:sticky;top:0;z-index:50;background:#0b0f17bd;backdrop-filter:blur(6px);border-bottom:1px solid #ffffff14}
.head .wrap{display:flex;gap:10px;align-items:center;padding:10px 12px}
.brand{font-weight:800}
.nav a{color:var(--muted);text-decoration:none;margin:0 6px}
.card{background:var(--card);border:1px solid var(--ring);border-radius:14px;padding:14px;margin:12px 0}
.row{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end}
.field{background:#0f1a33;color:var(--ink);border:1px solid var(--ring);border-radius:10px;padding:.6rem .9rem;min-width:200px}
.field-wrap{display:flex;flex-direction:column;gap:6px}
.btn{background:#143543;color:var(--ink);border:1px solid var(--ring);border-radius:10px;padding:.6rem 1rem;cursor:pointer}
.player{width:100%;margin-top:8px}
.muted{opacity:.75}
.badge{display:inline-block;background:#123; border:1px solid #234; border-radius:9px;padding:.25rem .5rem;margin-inline-start:.5rem;opacity:.85}
.list a{display:inline-block;margin:.25rem .35rem;padding:.45rem .7rem;border-radius:10px;background:#0f1a33;border:1px solid var(--ring);text-decoration:none;color:var(--ink)}
.footer{opacity:.7;text-align:center;padding:16px}
</style>
</head>
<body>
<header class="head">
  <div class="wrap container">
    <div class="brand">Gradify</div>
    <nav class="nav"><a href="#quran">القرآن</a> <a href="#ai">ذكاء</a> <a href="#english">الإنجليزية</a></nav>
    <div style="margin-inline-start:auto"></div>
  </div>
</header>

<main class="container">

  <!-- ===== القرآن (يظهر كاملاً حتى بدون JS) ===== -->
  <section id="quran" class="card" aria-labelledby="quran-title">
    <h2 id="quran-title">القرآن الكريم — استماع <span class="badge">نسخة ثابتة</span></h2>

    <div class="row" role="region" aria-label="أدوات الاستماع">
      <label class="field-wrap"><span>القارئ</span>
        <!-- تعبئة أولية ثابتة تعمل بدون JS -->
        <select id="reader" class="field">
          <option value="husary">محمود الحصري</option>
          <option value="minshawi">محمد صديق المنشاوي</option>
          <option value="abdul_basit">عبدالباسط عبدالصمد</option>
          <option value="sudais">عبدالرحمن السديس</option>
          <option value="afasy">مشاري العفاسي</option>
          <option value="shuraym">سعود الشريم</option>
          <option value="ajamy">أحمد العجمي</option>
          <option value="huthaify">علي الحذيفي</option>
          <option value="basfar">عبدالله بصفر</option>
        </select>
      </label>

      <label class="field-wrap"><span>الرواية/المصحف</span>
        <!-- مصحف افتراضي يعمل مباشرة -->
        <select id="mushaf" class="field">
          <option value="https://download.quranicaudio.com/quran/husary/murattal/">مرتل (حفص)</option>
          <option value="https://download.quranicaudio.com/quran/husary/mujawwad/">مجود</option>
        </select>
      </label>

      <label class="field-wrap"><span>السورة</span>
        <!-- أول 10 سور ثابتة كنسخة احتياطية ثم سيضيف JS كل الـ 114 -->
        <select id="surah" class="field">
          <option value="001">1 — الفاتحة</option>
          <option value="002">2 — البقرة</option>
          <option value="003">3 — آل عمران</option>
          <option value="004">4 — النساء</option>
          <option value="005">5 — المائدة</option>
          <option value="006">6 — الأنعام</option>
          <option value="007">7 — الأعراف</option>
          <option value="008">8 — الأنفال</option>
          <option value="009">9 — التوبة</option>
          <option value="010">10 — يونس</option>
        </select>
      </label>

      <button id="playBtn" class="btn">تشغيل</button>
    </div>

    <audio id="player" class="player" controls preload="none"></audio>
    <p class="muted">روابط HTTPS مباشرة من quranicaudio.com — إن فشل مصدر اختر مصحفًا آخر.</p>
  </section>

  <section id="ai" class="card">
    <h2>مواقع الذكاء الاصطناعي</h2>
    <div class="list" id="aiList">
      <!-- روابط ثابتة تعمل بدون JS -->
      <a href="https://chat.openai.com" target="_blank">ChatGPT</a>
      <a href="https://claude.ai" target="_blank">Claude</a>
    </div>
  </section>

  <section id="english" class="card">
    <h2>تعلم الإنجليزية مجانًا</h2>
    <div class="list" id="enList">
      <a href="https://www.bbc.co.uk/learningenglish" target="_blank">BBC Learning English</a>
      <a href="https://eslfast.com" target="_blank">ESL Fast</a>
    </div>
  </section>

  <p class="footer">صفحة واحدة — تعمل حتى لو تعطّل الجافاسكربت. بعد الرفع: Ctrl+F5.</p>
</main>

<script>
/* ===== بيانات كاملة + منطق بسيط ===== */
const RECITERS = {
  husary: [
    {name:"مرتل (حفص)", base:"https://download.quranicaudio.com/quran/husary/murattal/"},
    {name:"مجود",       base:"https://download.quranicaudio.com/quran/husary/mujawwad/"},
  ],
  minshawi: [
    {name:"مرتل", base:"https://download.quranicaudio.com/quran/minshawi/murattal/"},
    {name:"مجود", base:"https://download.quranicaudio.com/quran/minshawi/mujawwad/"},
  ],
  abdul_basit: [
    {name:"مرتل", base:"https://download.quranicaudio.com/quran/abdul_basit/murattal/"},
    {name:"مجود", base:"https://download.quranicaudio.com/quran/abdul_basit/mujawwad/"},
  ],
  sudais:   [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/abdulrahman_al_sudais/"}],
  afasy:    [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/mishaari_raashid_al_3afaasee/"}],
  shuraym:  [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/saud_alshuraim/"}],
  ajamy:    [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/ahmed_ibn_ali_al_ajamy/"}],
  huthaify: [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/ali_al_huthaify/"}],
  basfar:   [{name:"حفص/مرتل", base:"https://download.quranicaudio.com/quran/abdullah_basfar/"}],
};

const SURAH_NAMES = ["الفاتحة","البقرة","آل عمران","النساء","المائدة","الأنعام","الأعراف","الأنفال","التوبة","يونس","هود","يوسف","الرعد","إبراهيم","الحجر","النحل","الإسراء","الكهف","مريم","طه","الأنبياء","الحج","المؤمنون","النور","الفرقان","الشعراء","النمل","القصص","العنكبوت","الروم","لقمان","السجدة","الأحزاب","سبأ","فاطر","يس","الصافات","ص","الزمر","غافر","فصلت","الشورى","الزخرف","الدخان","الجاثية","الأحقاف","محمد","الفتح","الحجرات","ق","الذاريات","الطور","النجم","القمر","الرحمن","الواقعة","الحديد","المجادلة","الحشر","الممتحنة","الصف","الجمعة","المنافقون","التغابن","الطلاق","التحريم","الملك","القلم","الحاقة","المعارج","نوح","الجن","المزمل","المدثر","القيامة","الإنسان","المرسلات","النبأ","النازعات","عبس","التكوير","الانفطار","المطففين","الانشقاق","البروج","الطارق","الأعلى","الغاشية","الفجر","البلد","الشمس","الليل","الضحى","الشرح","التين","العلق","القدر","البينة","الزلزلة","العاديات","القارعة","التكاثر","العصر","الهمزة","الفيل","قريش","الماعون","الكوثر","الكافرون","النصر","المسد","الإخلاص","الفلق","الناس"];

const $ = s => document.querySelector(s);
const pad3 = n => String(n).padStart(3,'0');

function fillMushafByReader(){
  const rid = $('#reader').value;
  const list = RECITERS[rid] || [];
  $('#mushaf').innerHTML = list.map(m => `<option value="${m.base}">${m.name}</option>`).join('');
}

function ensure114Surahs(){
  const sel = $('#surah');
  if (sel.options.length >= 114) return; // سبق وتمت
  let html = "";
  for (let i=1;i<=114;i++){
    html += `<option value="${pad3(i)}">${i} — ${SURAH_NAMES[i-1]}</option>`;
  }
  sel.innerHTML = html;
}

function currentUrl(){
  let base = $('#mushaf').value || "";
  if (base && !base.endsWith('/')) base += '/';
  return base + ($('#surah').value || '001') + '.mp3';
}

document.addEventListener('DOMContentLoaded', () => {
  // عند تغيير القارئ، حدّث المصحف
  $('#reader').addEventListener('change', fillMushafByReader);
  fillMushafByReader();
  ensure114Surahs();

  // تشغيل
  $('#playBtn').addEventListener('click', () => {
    const p = $('#player');
    p.src = currentUrl();
    p.play().catch(()=>{});
  });
});
</script>
</body>
</html>
