<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>حاسبة المعدل</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config={darkMode:'class',theme:{extend:{
colors:{navy:'#0b1220',blue:'#2563eb',sky:'#60a5fa',bg:'#f3f6fb'},
boxShadow:{soft:'0 12px 30px rgba(2,6,23,.10)',lift:'0 20px 55px rgba(2,6,23,.16)'}
}}}
</script>
<style>
:root{color-scheme:light} html.dark{color-scheme:dark}
*{-webkit-tap-highlight-color:transparent}
input,select,button{font-size:16px}
select{background-position:left .75rem center!important;padding-left:2.25rem}
</style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-bg text-slate-900 dark:from-slate-950 dark:to-slate-900 dark:text-slate-50 overflow-x-hidden">
<div class="pointer-events-none fixed inset-0 -z-10">
  <div class="absolute -top-28 -left-28 w-80 h-80 bg-sky/25 blur-3xl rounded-full dark:bg-blue/20"></div>
  <div class="absolute top-24 -right-28 w-80 h-80 bg-blue/15 blur-3xl rounded-full dark:bg-sky/15"></div>
</div>

<header class="sticky top-0 z-50">
  <div class="bg-gradient-to-l from-navy to-slate-900 text-white">
    <div class="max-w-md mx-auto px-4 pt-4 pb-3 flex items-center justify-between">
      <div class="font-extrabold tracking-tight">حاسبة المعدل</div>
      <div class="flex items-center gap-2">
        <span class="text-[11px] bg-white/10 border border-white/15 rounded-full px-3 py-1">SEU • 4.0</span>
        <button id="toggleTheme" class="w-9 h-9 grid place-items-center rounded-xl bg-white/10 border border-white/15 active:opacity-80" aria-label="تبديل الوضع">
          <svg id="sun" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="hidden">
            <path d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
          </svg>
          <svg id="moon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 3a7 7 0 1 0 9 9 9 9 0 1 1-9-9Z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="max-w-md mx-auto px-4 -mt-3">
    <section class="bg-white/95 dark:bg-slate-900/90 backdrop-blur rounded-2xl shadow-soft border border-slate-200/70 dark:border-slate-700/60 overflow-hidden">
      <div class="p-4 grid grid-cols-2 gap-3">
        <div class="rounded-2xl bg-gradient-to-l from-blue to-sky text-white p-4 shadow-soft">
          <div class="text-[11px] opacity-90">المعدل الفصلي</div>
          <div class="mt-1 text-3xl font-extrabold tabular-nums leading-none" id="semGpa">0</div>
          <div class="mt-1 text-[11px] opacity-90">من 4</div>
          <div class="mt-3 h-2 rounded-full bg-white/25 overflow-hidden"><div id="semBar" class="h-full bg-white rounded-full w-0"></div></div>
          <div class="mt-2 text-[11px] opacity-90">ساعات الفصل: <span class="font-bold tabular-nums" id="semHours">0</span></div>
        </div>

        <div class="rounded-2xl bg-gradient-to-l from-navy to-slate-800 text-white p-4 shadow-soft">
          <div class="text-[11px] opacity-90">المعدل التراكمي</div>
          <div class="mt-1 text-3xl font-extrabold tabular-nums leading-none" id="cumGpa">0</div>
          <div class="mt-1 text-[11px] opacity-90">من 4</div>
          <div class="mt-3 h-2 rounded-full bg-white/20 overflow-hidden"><div id="cumBar" class="h-full bg-white rounded-full w-0"></div></div>
          <div class="mt-2 text-[11px] opacity-90">إجمالي الساعات: <span class="font-bold tabular-nums" id="cumHours">0</span></div>
        </div>
      </div>

      <div class="px-4 pb-4 grid grid-cols-2 gap-3">
        <div class="rounded-xl bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 px-3 py-2">
          <div class="text-[11px] text-slate-500 dark:text-slate-300">نقاط الفصل</div>
          <div class="font-bold tabular-nums" id="semPoints">0</div>
        </div>
        <div class="rounded-xl bg-slate-50 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 px-3 py-2">
          <div class="text-[11px] text-slate-500 dark:text-slate-300">النقاط الكلية</div>
          <div class="font-bold tabular-nums" id="cumPoints">0</div>
        </div>
      </div>
    </section>
  </div>
</header>

<main class="max-w-md mx-auto px-4 pt-4 pb-28 space-y-4">
  <details class="bg-white dark:bg-slate-900/80 rounded-2xl shadow-soft border border-slate-200/70 dark:border-slate-700/60 overflow-hidden">
    <summary class="px-4 py-3 cursor-pointer select-none flex items-center justify-between">
      <span class="font-extrabold">بيانات سابقة</span><span class="text-slate-500 dark:text-slate-300">▾</span>
    </summary>
    <div class="p-4 grid grid-cols-2 gap-3">
      <div>
        <label class="block text-[11px] text-slate-500 dark:text-slate-300 mb-1">الساعات السابقة</label>
        <input id="prevHours" type="number" min="0" step="1" value="0"
          class="w-full rounded-xl border border-slate-200 dark:border-slate-700 px-3 py-2 bg-white dark:bg-slate-950/40 tabular-nums">
      </div>
      <div>
        <label class="block text-[11px] text-slate-500 dark:text-slate-300 mb-1">المعدل السابق</label>
        <input id="prevGpa" type="number" min="0" max="4" step="0.01" value="0"
          class="w-full rounded-xl border border-slate-200 dark:border-slate-700 px-3 py-2 bg-white dark:bg-slate-950/40 tabular-nums">
      </div>
      <button id="reset" class="col-span-2 mt-1 w-full rounded-xl border border-slate-200 dark:border-slate-700 py-3 font-bold active:opacity-80">إعادة ضبط</button>
    </div>
  </details>

  <section id="courses" class="space-y-4"></section>
  <div class="h-6"></div>
</main>

<button id="fab" aria-label="إضافة مادة"
class="fixed bottom-6 right-6 w-14 h-14 rounded-full bg-blue text-white shadow-lift active:scale-95 transition grid place-items-center">
  <svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
</button>

<div id="sheetBackdrop" class="fixed inset-0 bg-black/40 hidden"></div>
<section id="sheet" class="fixed left-0 right-0 bottom-0 translate-y-full transition-transform duration-200">
  <div class="max-w-md mx-auto px-4 pb-[env(safe-area-inset-bottom)]">
    <div class="bg-white dark:bg-slate-900 rounded-t-3xl shadow-lift border border-slate-200 dark:border-slate-700">
      <div class="px-4 pt-3 pb-2 flex items-center justify-between">
        <div class="font-extrabold">إضافة مادة</div>
        <button id="closeSheet" class="w-10 h-10 grid place-items-center rounded-xl bg-slate-100 dark:bg-slate-800 active:opacity-80">✕</button>
      </div>
      <div class="px-4 pb-4 space-y-3">
        <div class="grid grid-cols-2 gap-3">
          <div>
            <div class="text-[11px] text-slate-500 dark:text-slate-300 mb-1">التقدير</div>
            <select id="newGrade" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 px-3 py-2 bg-white dark:bg-slate-950/40"></select>
          </div>
          <div>
            <div class="text-[11px] text-slate-500 dark:text-slate-300 mb-1">الساعات</div>
            <select id="newHours" class="w-full rounded-xl border border-slate-200 dark:border-slate-700 px-3 py-2 bg-white dark:bg-slate-950/40">
              <option value="1">1</option><option value="2">2</option><option value="3" selected>3</option><option value="4">4</option>
            </select>
          </div>
        </div>
        <button id="addCourse" class="w-full rounded-2xl bg-blue text-white font-extrabold py-4 shadow-soft active:scale-[.99] transition">إضافة</button>
      </div>
    </div>
  </div>
</section>

<script src="gpa-app.js"></script>
</body>
</html>
